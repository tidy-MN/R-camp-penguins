---
title: "Inventory Duty - Exercise 1"
output: 
  blogdown::html_page: 
    highlight: tango
    css: ../../css/camp_style.css
    number_sections: true
    self_contained: false
    fontsize: 18pt
    monofont: Source Code Pro
    toc: false
    toc_depth: 1
---

<link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
h1 .header-section-number {background: cornflowerblue;}
hr {background:  cornflowerblue;}
</style>


```{r setup, include=FALSE}
library(tidyverse)
library(rmarkdown)
library(knitr)
library(magrittr)
library(icons)

xaringanExtra::use_clipboard()

opts_chunk$set(error=TRUE, color=NULL, message=FALSE, eval=T)
htmltools::tagList(rmarkdown::html_dependency_font_awesome())
```

# Before you start...

Please make a brand-new project for this exercise - this will be project that you will do all your exercises in for the reminder of the course. To make a new project in RStudio, go to File -> New Project -> New Directory -> New Project

Now you need to pick a new directory. Pick a location that makes sense to you where you'll be able to find it again. If you made a project while following along with the videos, you can pick the same location for this one and then both your projects will be in the same location.

Once you have a new project made, make a new R script and save it (Ctrl + S or click the floppy disk). Name it something pithy like `exercise_1_day_1.R` or `frank.R` and you'll be ready to go!

# Inventory Duty

We love our job as a baking-bot, but the thing we love more than baking is actually taking the inventory. We like to play with the inventory data and present beautiful summaries to the lead-baking bot. Honestly, if we could bake and get to work with data all day long that would be a dream come true...but we're getting ahead of our story. 

We've been tasked with downloading the inventory file from our suppliers and determining what needs to be ordered because we're running low.

So the first thing we need to do is read in the file that contains the inventory!

```{r}
inventory <- read_csv("https://tidy-mn.github.io/R-camp-penguins/data/inventory_data.csv")
```

# Getting to know the data

Now that we have the data, what should be our first step to better understand the information in the file, what data types the columns are, and other summary information about the data? The lead-baking bot especially wants to know what the maximum value of `NUMBER_OF_UNITS_IN_STOCK` for planning purposes. 

Feel free to use any and all of the functions you know, but also feel free to look at the hint for inspiration!

<div class="quiz">

### <i class="fas fa-cookie-bite" style="color: gray;"></i> Get to know the data {-}

```{r exer-tabs1, results='asis', echo=F}
source("../../insert_tabs.R")

tabs <- c("Explore functions", "Show hint", "Show code")

content <- c(Exercise = '<h4> When we first get a dataset it is fun to sit down and get to know it better. Below are a few functions to choose from: </h4>

- `glimpse`
- `summmary`
- `head`
- `tail`
- `class`

<br>',

show_hint = 'code_start
# glimpse gives us that data type for each column and 
# an idea of what to expect
glimpse() 

# summary shows us missing values and 
# summary stats for numeric columns
summary() 

code_end',

show_code = 'code_start

glimpse(inventory)
summary(inventory)
  
code_end')

tab_html <- add_tabs(tabs, content, 1)

cat(paste0(tab_html, collapse = "\n"))
```
</div>

<br>

WHOA. We have 378 units of something in stock?! What are we making, cupcakes for a whole school?! A cake big enough to cover a bus?! Time to go investigate...

# Why do we do this to ourselves?

How do we go about trying to figure out what's going on with that wacky number? We need to be able to narrow down just to the row that meets the condition where `NUMBER_OF_UNITS_IN_STOCK` is equal to 378. What tool do we have that will let us do that?

<div class="quiz">

### <i class="fas fa-cookie-bite" style="color: gray;"></i> Investigation underway {-}

```{r exer-tabs2, results='asis', echo=F}

tabs <- c("Find the odd-ball", "Show hint", "Show code")

content <- c(Exercise = '<h4> Filter the inventory dataset to just the row that meets the condition of `NUMBER_OF_UNITS_IN_STOCK` is equal to 378 </h4>

<br>',

show_hint = 'code_start

# Remember to use the double equal sign (==) for "is equal to"
filter(inventory, PLACE A CONDITION HERE) 

code_end',

show_code = 'code_start

filter(inventory, NUMBER_OF_UNITS_IN_STOCK == 378)

code_end')

tab_html <- add_tabs(tabs, content, 2)

cat(paste0(tab_html, collapse = "\n"))
```
</div>

<br>

Oh. We have a total row - that's annoying. It's also adding NAs to other columns which might make some of our analysis hard in the future. So let's get rid of it and look at our data *for real*.

Though as a reminder, lots of functions have the additional argument `na.rm = TRUE` which allows you to not use NA values when calculating things like means, maxes, etc. Super handy!

```{r}
inventory <- filter(inventory, INGREDIENT != 'TOTAL')
```

Let's try `summary` again and see if we can get some better results, no more NAs or outrageous numbers

```{r}
summary(inventory)
```

Much better. Okay, let's see what we've been asked to do

# Place that order!

Oh right! We need to use the data that we've received to determine what items we need to order! If the number of units that we currently have in-stock is less than the order threshold we need to place an order right away.

Do we have any ingredientst that fit that criteria?

<div class="quiz">

### <i class="fas fa-cookie-bite" style="color: gray;"></i> What to order? {-}

```{r exer-tabs3, results='asis', echo=F}
source("../../insert_tabs.R")

tabs <- c("Less than Order Threshold", "Show hint", "Show code")

content <- c(Exercise = '<h4> Filter the inventory dataset to the rows that meet the condition where the number of units in stock is less than the order threshold. </h4>

<br>',

show_hint = 'code_start
order_now <- filter(inventory, PLACE A CONDITION HERE) 
order_now
code_end',

show_code = 'code_start
order_now <- filter(inventory, 
                    NUMBER_OF_UNITS_IN_STOCK < ORDER_THRESHOLD)
order_now
code_end')

tab_html <- add_tabs(tabs, content, 32)

cat(paste0(tab_html, collapse = "\n"))
```
</div>

<br>

That makes sense, we've been getting lots of orders for our Gluten-free Applesauce and Walnut muffins and also for our Triple-Chocolate Brownies. We'll make a note that we need to make an urgent order for these supplies so we don't run out!

The last thing that we need to do is export out the filtered data so we can send it to the lead-baking bot. 

```{r, eval=F}
write_csv(x = order_now, file = "order_now.csv")
```

Now we have a file that we can send in an email listing out the ingredients that we need to order right away. As well as a series of scripted steps that we can use again and again and again...well you get the idea.

__NICE WORK!__

<i class="fa fa-cookie-bite"></i> 
<i class="fa fa-robot"></i> 
<i class="fa fa-cookie-bite"></i> 
