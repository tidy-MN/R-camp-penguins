---
title: "Maps - Exercise 2"
output: 
  blogdown::html_page: 
    highlight: tango
    css: ../../css/camp_style.css
    number_sections: false
    self_contained: false
    fontsize: 18pt
    monofont: Source Code Pro
    toc: false
    toc_depth: 1
---

<script src="/R-camp-penguins/rmarkdown-libs/clipboard/clipboard.min.js"></script>
<link href="/R-camp-penguins/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
<script src="/R-camp-penguins/rmarkdown-libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
<script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
<link href="/R-camp-penguins/rmarkdown-libs/font-awesome/css/all.min.css" rel="stylesheet" />
<link href="/R-camp-penguins/rmarkdown-libs/font-awesome/css/v4-shims.min.css" rel="stylesheet" />
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>
  <link rel="stylesheet" href="../../css/camp_style.css" type="text/css" />


<p><link rel="stylesheet" 
href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"></p>
<div id="before-you-start" class="section level1">
<h1>Before you start…</h1>
<p>Make sure you are still in your project that you created for doing exercises and then make a new R script. Save it as soon as you make it and give it a good name like <code>exercise_2_day_4.R</code> or <code>katya.R</code> and you’ll be ready to go!</p>
</div>
<div id="building-on-our-previous-work" class="section level1">
<h1>Building on our previous work…</h1>
<p>Now that we know <em>where</em> the birds go, we need to make sure that they have a safe and healthy home to go to!</p>
<p>Let’s check out the health of the forest by county in the state of Minnesota. We will need to know the locations of the counties in Minnesota, and we will also need some forest health data.</p>
<p>The <a href="https://gisdata.mn.gov">Minnesota Geospatial Commons</a> is an excellent source of geospatial data in Minnesota and is very searchable.</p>
<p>If you search <em>forest health</em> you will find some forest health datasets of large scale tree canopy damage prepared for several years. We will use the most recent, 2022. Let’s read in a shapefile using the <a href="https://r-spatial.github.io/sf/">sf package</a>. You will note that the shapefile is [zipped](<a href="https://en.wikipedia.org/wiki/ZIP_(file_format)" class="uri">https://en.wikipedia.org/wiki/ZIP_(file_format)</a>. So we first create two temporary folders to begin the process of grabbing this file, unzipping it, and then reading it in as a simple feature (sf) object. The <em>temp</em> and <em>temp2</em> folders, and the shapefile, is saved in a local temporary folder.</p>
<p>If you want to save the shapefile on your computer for the longterm, you can use the <a href="https://r-spatial.github.io/sf/reference/st_write.html">st_write</a> function.</p>
<p><br></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="co"># Create temp files</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>temp2 <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># ZIP file URL</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&quot;https://resources.gisdata.mn.gov/pub/gdrs/data/pub/us_mn_state_dnr/env_forest_health_survey_2022/shp_env_forest_health_survey_2022.zip&quot;</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="co"># Download the zip file and save to temp </span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="fu">download.file</span>(url, temp)</span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="co"># Unzip the contents of the temp and save unzipped content in temp2</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="fu">unzip</span>(<span class="at">zipfile =</span> temp, <span class="at">exdir =</span> temp2)</span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="co"># Read the shapefile</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a>forest_damage <span class="ot">&lt;-</span> <span class="fu">st_read</span>(temp2)</span></code></pre></div>
<pre><code>## Reading layer `forest_health_survey_2022&#39; from data source 
##   `/tmp/RtmpGIdYlq/file6016cd70e27&#39; using driver `ESRI Shapefile&#39;
## Simple feature collection with 2825 features and 10 fields
## Geometry type: POLYGON
## Dimension:     XY
## Bounding box:  xmin: 194139.8 ymin: 4998795 xmax: 748411.6 ymax: 5467028
## Projected CRS: NAD83 / UTM zone 15N</code></pre>
<p><br></p>
<p>We can look at the data in two ways:</p>
<ol style="list-style-type: decimal">
<li>View the attributes by clicking <code>forest_damage</code> in the Environment pane. Look at the geometry column. That is where the spatial information is stored. Each row in the dataset is a different polygon shape, but all belong to the same dataset or shapefile.</li>
<li>Next, we can plot the data in base R to make sure it has the appropriate geographic information and at least looks like a map. This is a good first check to see if you’ve successfully pulled in the proper shapefile.</li>
</ol>
<p><br></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">plot</span>(forest_damage[<span class="dv">1</span>]) </span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co"># Try dropping the [1] and see what happens.</span></span></code></pre></div>
<p><br></p>
<p>When we look at this, we see that there are many polygons, and if we look at the data (by running <code>glimpse(forest_damage)</code>, or clicking on <code>forest_damage</code> in the environment) we see that there are severity ratings for each polygon in the column <code>PERCENT_AF</code>.</p>
<p>For our first analysis let’s sum the area in each county that has damage to tree canopy. Then, we can bring in another county dataset to look at the places in MN with the most tree canopy damage and see if our bird’s flight path has been affected. For step one, let’s use <a href="https://cran.r-project.org/web/packages/tigris/readme/README.html">tigris</a> and pull in the county shapefile for Minnesota.</p>
<p><br></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">counties</span>(<span class="at">state =</span> <span class="st">&quot;MN&quot;</span>, <span class="at">cb =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">plot</span>(counties[<span class="dv">1</span>])</span></code></pre></div>
<p><img src="/R-camp-penguins/page/exercise/day4/02-forest-health-map_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p><br></p>
<p>And of course we want to check to see if our CRS match, because we want to join these two geospatial datasets.</p>
<p><br></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="fu">st_crs</span>(counties)</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="fu">st_crs</span>(forest_damage)</span></code></pre></div>
<p><br></p>
<p>The forest damage dataset has a coordinate reference system in UTMs (Universal Transverse Mercator), and remember that those have units of meters, which are very nice for working with area measurements. So, let’s convert the county dataset into UTMs as well. Zone 15 is Minnesota’s primary UTM zone, and the ID for UTM Zone 15 is <code>26915</code>.</p>
<p><br></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>counties <span class="ot">&lt;-</span> <span class="fu">st_transform</span>(counties, <span class="at">crs =</span> <span class="dv">26915</span>)</span></code></pre></div>
<p><br></p>
<p>Now, we can run a spatial intersect on the two geospatial datasets. The <a href="https://r-spatial.github.io/sf/reference/geos_binary_ops.html">st_intersection</a> function returns the polygons where the two geometries intersect. (<a href="https://stackoverflow.com/questions/62442150/why-use-st-intersection-rather-than-st-intersects">Here’s a short description with images</a>.) All of the polygons in the <code>forest_damage</code> dataset will be split into their respective Minnesota county. So, some of the forest damage polygons may be split across several counties. But no worries, R has us covered!</p>
<p><br></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>forest_damage_counties <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(counties, forest_damage)</span></code></pre></div>
<pre><code>## Warning: attribute variables are assumed to be spatially constant throughout
## all geometries</code></pre>
<p><br></p>
<p>Take a look. The forest polygons that spanned across county borders have been split into two polygons.</p>
<p>An original forest damage polygon from row 2,011 in the <code>forest_damage</code> data.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">ggplot</span>(forest_damage[<span class="dv">2011</span>, <span class="dv">1</span>]) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">fill =</span> <span class="st">&quot;hotpink&quot;</span>)</span></code></pre></div>
<p><img src="/R-camp-penguins/page/exercise/day4/02-forest-health-map_files/figure-html/split_county-1.png" width="672" /></p>
<p>The shape was split into two polygons along the county border when intersected with the <code>counties</code> data.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> forest_damage_counties[<span class="st">&quot;2011&quot;</span>, <span class="dv">1</span>], <span class="at">fill =</span> <span class="st">&quot;green&quot;</span>) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> forest_damage_counties[<span class="st">&quot;2011.1&quot;</span>, <span class="dv">1</span>], <span class="at">fill =</span> <span class="st">&quot;darkgreen&quot;</span>)</span></code></pre></div>
<pre><code>## Error in `calc_limits_bbox()`:
## ! Scale limits cannot be mapped onto spatial coordinates in
##   `coord_sf()`.
## ℹ Consider setting `lims_method = &quot;geometry_bbox&quot;` or `default_crs = NULL`.</code></pre>
<p><br></p>
<div id="st_area" class="section level3">
<h3>st_area</h3>
<p>Next, we can calculate the area for each of the new split up <code>forest_damage</code> polygons.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>forest_damage_counties <span class="ot">&lt;-</span> forest_damage_counties <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>                          <span class="fu">mutate</span>(<span class="at">damage_area =</span> <span class="fu">st_area</span>(geometry))</span></code></pre></div>
<p><br></p>
<p>Since we no longer need each individual polygon geometry, we can set the geometry of the dataset to NULL. This can help save some memory for R when working with large datasets.</p>
<p><br></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>forest_damage_counties <span class="ot">&lt;-</span> <span class="fu">st_set_geometry</span>(forest_damage_counties, <span class="cn">NULL</span>)</span></code></pre></div>
<blockquote>
<p>Check the dataframe to see if the <code>geometry</code> column vanished. I hope so!</p>
</blockquote>
<p><br></p>
<p>Now, we want to sum the damaged tree area within each county. This will be a throwback to our group_by and summarize work. We want our new summarized dataframe to have the following information: the total area in the polygon and the name of the county.</p>
</div>
<div id="sum-up-the-damaged-areas" class="section level3 unnumbered quiz">
<h3><i class="fas fa-cookie-bite" style="color: gray;"></i> Sum up the damaged areas</h3>
<ul class="nav nav-pills" id="myTab2873" role="tablist" style="margin-top: 18px;">
<li class="nav-item active">
<a class="nav-link" id="group_byandsummarize2873-tab" data-toggle="tab" href="#group_byandsummarize2873" role="tab" aria-controls="group_byandsummarize2873" aria-selected="true">group_by and summarize</a>
</li>
<li class="nav-item">
<a class="nav-link" id="showhint2873-tab" data-toggle="tab" href="#showhint2873" role="tab" aria-controls="showhint2873" aria-selected="false">Show hint</a>
</li>
<li class="nav-item">
<a class="nav-link" id="showcode2873-tab" data-toggle="tab" href="#showcode2873" role="tab" aria-controls="showcode2873" aria-selected="false">Show code</a>
</li>
</ul>
<div id="myTabContent" class="well tab-content" style="background-color: white;">
<div id="group_byandsummarize2873" class="tab-pane fade active in" role="tabpanel" aria-labelledby="group_byandsummarize2873-tab">
<h4>
We are going to sum the damaged areas within each county, returning the following information: the total area in the polygon and the name of the County. Call the summarized data <code>forest_damage_total</code>.
</h4>
<p><br></p>
</div>
<div id="showhint2873" class="tab-pane fade" role="tabpanel" aria-labelledby="showhint2873-tab">
<pre class="sourceCode r">

forest_damage_total <- forest_damage_counties %>%
  group_by(______) %>%
  summarise(total_damaged_area = __________)
  
</pre>
</div>
<div id="showcode2873" class="tab-pane fade" role="tabpanel" aria-labelledby="showcode2873-tab">
<pre class="sourceCode r">

forest_damage_total <- forest_damage_counties %>%
  group_by(NAME) %>%
  summarise(total_damaged_area = sum(damage_area, na.rm = TRUE))
  
</pre>
</div>
</div>
</div>
<p><br></p>
<div id="join-tables" class="section level3">
<h3>Join tables</h3>
<p>Now we need to join the summed forest damage data to the county spatial data so that we have the information we need to present the data as a map. We use <code>left_join</code> below to add the forest damage totals to the county polygons. The rows are joined based on where the county names match in both tables in the <code>NAME</code> columns. We’ll cover joins in great detail next session - so consider this a preview teaser.</p>
<p><br></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>county_totals <span class="ot">&lt;-</span> <span class="fu">left_join</span>(counties, forest_damage_total, <span class="at">by =</span> <span class="st">&quot;NAME&quot;</span>)</span></code></pre></div>
<p><br></p>
</div>
<div id="should-the-missing-values-for-damaged-area-be-zero" class="section level3">
<h3>Should the missing values for damaged area be zero?</h3>
<p>Now, we replace all missing values with zeroes. You always want to think a bit before replacing NULLs with zeroes. In this case, we have some information to justify that the missing values are where there was no forest canopy damage and so the forest canopy damage area would be zero (based on the reports used in this dataset).</p>
<p>Sometimes a NULL means there is no information, which means that you don’t know what the value is and you do not have adequate information for replacements.</p>
<p><br></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>county_totals <span class="ot">&lt;-</span> county_totalse <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">total_damaged_area =</span> <span class="fu">replace_na</span>(total_damaged_area, <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;county_totalse&#39; not found</code></pre>
<p><br></p>
<blockquote>
<p>Oh, right! Our area column has units attached and is not a simple number. We could convert the column to <code>as.numeric</code> or we can replace the NA values with a value that has units, such as <code>0 m^2</code>. Let’s do that with the <code>units</code> package.</p>
</blockquote>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">library</span>(units)</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>county_totals <span class="ot">&lt;-</span> county_totals <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a>                 <span class="fu">mutate</span>(<span class="at">total_damaged_area =</span> <span class="fu">replace_na</span>(total_damaged_area, <span class="fu">as_units</span>(<span class="dv">0</span>, <span class="st">&quot;m^2&quot;</span>)))</span></code></pre></div>
<p><br></p>
<p>Okay that was fun, but now let’s drop the units entirely. They don’t really play that nice with ggplot and leaflet. They’re always like, just show me the raw numbers!</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Drop the units</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>county_totals <span class="ot">&lt;-</span> county_totals <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_damaged_area =</span> <span class="fu">as.numeric</span>(total_damaged_area))</span></code></pre></div>
<p><br></p>
<p>Finally we get to make a map. Remember, data prep is more than half the battle!</p>
</div>
<div id="map-it-out" class="section level3 unnumbered quiz">
<h3><i class="fas fa-cookie-bite" style="color: gray;"></i> Map it out</h3>
<ul class="nav nav-pills" id="myTab1ab" role="tablist" style="margin-top: 18px;">
<li class="nav-item active">
<a class="nav-link" id="mapusingggplot1ab-tab" data-toggle="tab" href="#mapusingggplot1ab" role="tab" aria-controls="mapusingggplot1ab" aria-selected="true">Map using ggplot</a>
</li>
<li class="nav-item">
<a class="nav-link" id="showhint1ab-tab" data-toggle="tab" href="#showhint1ab" role="tab" aria-controls="showhint1ab" aria-selected="false">Show hint</a>
</li>
<li class="nav-item">
<a class="nav-link" id="showcode1ab-tab" data-toggle="tab" href="#showcode1ab" role="tab" aria-controls="showcode1ab" aria-selected="false">Show code</a>
</li>
</ul>
<div id="myTabContent" class="well tab-content" style="background-color: white;">
<div id="mapusingggplot1ab" class="tab-pane fade active in" role="tabpanel" aria-labelledby="mapusingggplot1ab-tab">
<h4>
Make a map using <code>ggplot</code> and <code>geom_sf</code>. Remember to add good plot elements like titles and colors. Fun colors are very important.
</h4>
<p><br></p>
</div>
<div id="showhint1ab" class="tab-pane fade" role="tabpanel" aria-labelledby="showhint1ab-tab">
<p>What should you add to make this a more complete plot?
<br></p>
<pre class="sourceCode r">

ggplot(data = ________, aes(fill = total_damaged_area)) +
  geom_sf()
  
</pre>
</div>
<div id="showcode1ab" class="tab-pane fade" role="tabpanel" aria-labelledby="showcode1ab-tab">
<pre class="sourceCode r">

ggplot(data = county_totals, aes(fill = total_damaged_area)) +
  geom_sf()+
  labs(title = "Total forest canopy area damage",
       subtitle = "Minnesota counties",
       x = "Longitude",
       y = "Latitude",
       caption = "Source: 2022 MN DNR Forest Health Survey") +
  scale_fill_viridis_c(name = "Total Damaged Area") +
  theme_minimal()
  
</pre>
</div>
</div>
</div>
<p><br></p>
<p>Our bird originated in St. Paul, MN and it looks like there wasn’t a lot of damaged forest canopy in Ramsey county. So I’m going to assume our bird is whistling away in a healthy little tree.</p>
<p><strong>Happy spatial analysis friends!</strong></p>
<p><br></p>
<p><i class="fa fa-cookie-bite"></i>
<i class="fa fa-robot"></i>
<i class="fa fa-cookie-bite"></i></p>
</div>
