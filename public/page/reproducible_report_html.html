<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Abby Stamm">
<meta name="dcterms.date" content="2025-09-19">

<title>Writing reproducible reports in RStudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="reproducible_report_html_files/libs/clipboard/clipboard.min.js"></script>
<script src="reproducible_report_html_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="reproducible_report_html_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="reproducible_report_html_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="reproducible_report_html_files/libs/quarto-html/popper.min.js"></script>
<script src="reproducible_report_html_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="reproducible_report_html_files/libs/quarto-html/anchor.min.js"></script>
<link href="reproducible_report_html_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="reproducible_report_html_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="reproducible_report_html_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="reproducible_report_html_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="reproducible_report_html_files/libs/bootstrap/bootstrap-6a8e6d95bfcd174082ff54166b04dcf7.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Writing reproducible reports in RStudio</h1>
<p class="subtitle lead">Rendering your content from markdown to HTML using Quarto</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Abby Stamm </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>This report will show you basic markdown and Quarto settings to create a reproducible report in HTML. To write reproducible reports, you need two skills. First, you need some basic knowledge about how to format your report content. Second, you need to know how to manipulate and display data within your report. We will cover formatting first, then reading in data.</p>
<!-- note https://quarto-ambition.github.io/website/1-2-documents/1-2-documents.html#/title-slide for quarto syntax -->
<p>To begin, create a new project in RStudio. I called mine “RCamp_reports”. Click on “File” &gt; “New file” &gt; “Quarto Document …” to create a new Quarto document. When the dialog asks what kind of report to create, select HTML for now.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Word and PDF files">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Word and PDF files
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Quarto files can also be converted to:</p>
<ul>
<li>Word if you have Microsoft Word installed on your computer</li>
<li>portable document format (PDF) if you have a tex compiler like Miktex installed on your computer</li>
</ul>
<p>These are beyond the scope of this workshop. If you want to try them, select “PDF” or “Word” when creating a new document instead of HTML. All of the formatting syntax below should work for HTML, PDF, and Word, though results may look a bit different among the three formats. I have found Word and PDF trickier to customize than HTML, especially if you are trying to meet specific branding requirements.</p>
</div>
</div>
</div>
</section>
<section id="setting-up-your-yaml" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-your-yaml">Setting up your YAML</h2>
<p>The YAML stores the metadata for your document. It includes anything that affects formatting when your document is rendered.</p>
<p>This list is not exhaustive. It includes of items I often use in my own work.</p>
<ul>
<li><strong>Context</strong>: title, subtitle, author, date</li>
<li><strong>Format</strong>: various flavors of HTML, PDF, and Word, and which renderer to use</li>
<li><strong>Inclusions</strong>: table of contents, numbering sections</li>
<li><strong>Reference files</strong>: citation list, custom style sheet or other template file</li>
<li><strong>Formatting</strong>: instructions for how to display charts, tables, paragraphs, and other content</li>
</ul>
<p>The YAML is always at the beginning of the document. A simple version looks something like this.</p>
<pre><code>---
title:    "My title"
subtitle: "My subtitle"
author:   "Marvellous me"
date:     "2025-10-16"
format:   html
---</code></pre>
<section id="your-turn" class="level5">
<h5 class="anchored" data-anchor-id="your-turn">Your turn</h5>
<p>In the Quarto document you created, add a subtitle, author, and date. Then save your file. At any time, you can save your file and click “Render” at the top of the window to convert the file to HTML and view it. Render your document now.</p>
<ol type="1">
<li>Did your file render correctly?</li>
<li>If not, what went wrong?</li>
</ol>
</section>
</section>
<section id="crash-course-in-markdown-syntax" class="level2">
<h2 class="anchored" data-anchor-id="crash-course-in-markdown-syntax">Crash course in Markdown syntax</h2>
<p>Before we write our report, we need to learn how to convey our information. This section will cover common markdown formatting options for content that will be compiled to portable document format (PDF), hypertext markup language (HTML), or Word documents.</p>
<div class="callout callout-style-default callout-note callout-titled" title="Advanced options">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Advanced options
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>There are many advanced formatting options in Quarto. A few common ones include:</p>
<ul>
<li>Use custom style sheets (CSS) to define font and paragraph colors and styles in HTML.</li>
<li>Auto-generate tables of contents and citation lists.</li>
<li>Auto-number sections, footnotes, citations, tables, and figures.</li>
<li>Render one Quarto document within another, for example a multi-chapter book where each chapter is a separate file.</li>
</ul>
<p>You can learn about these features and more at the links below. They are beyond the scope of this workshop.</p>
</div>
</div>
</div>
<p>These two online sources on Quarto formatting are probably the most up-to-date.</p>
<ul>
<li><a href="https://quarto.org/docs/authoring/markdown-basics.html">Quarto Markdown Basics</a></li>
<li><a href="https://rmarkdown.net/quarto/">Getting Started with Quarto by RStudio: A Beginner’s Guide</a></li>
</ul>
<p>The resources below are for R markdown, the predecessor of Quarto, so some syntax may work differently. I include them because Quarto is new and its documentation is not as robust as for R markdown.</p>
<ul>
<li><a href="https://bookdown.org/yihui/rmarkdown-cookbook/">R Markdown Cookbook</a></li>
<li><a href="https://rmarkdown.rstudio.com/">R Markdown at RStudio</a></li>
</ul>
<section id="text-modifiers" class="level3">
<h3 class="anchored" data-anchor-id="text-modifiers">Text modifiers</h3>
<p>The table below shows common markdown syntax and corresponding results.</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table of markdown text modifiers</caption>
<thead>
<tr class="header">
<th style="text-align: left;">Syntax</th>
<th style="text-align: left;">Symbols</th>
<th style="text-align: left;">Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>`Verbatim` code</code></td>
<td style="text-align: left;">1 backtick at each end</td>
<td style="text-align: left;"><code>Verbatim</code> code</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>**Bold** font</code></td>
<td style="text-align: left;">2 asterisks at each end</td>
<td style="text-align: left;"><strong>Bold</strong> font</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>*Italic* font</code></td>
<td style="text-align: left;">1 asterisk at each end</td>
<td style="text-align: left;"><em>Italic</em> font</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>~~Strikethrough~~</code></td>
<td style="text-align: left;">2 tildes at each end</td>
<td style="text-align: left;"><del>Strikethrough</del></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>x^Superscript^</code></td>
<td style="text-align: left;">1 carrot at each end</td>
<td style="text-align: left;">x<sup>Superscript</sup></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>x~Subscript~</code></td>
<td style="text-align: left;">1 tilde at each end</td>
<td style="text-align: left;">x<sub>Subscript</sub></td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="your-turn-1" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-1">Your turn</h5>
<p>Try the following exercises. Use this paragraph, from the beginning of <a href="https://www.gutenberg.org/ebooks/11"><em>Alice’s Adventures in Wonderland</em> by Lewis Carroll</a>.</p>
<blockquote class="blockquote">
<p>Alice was beginning to get very tired of sitting by her sister on the bank, and of having nothing to do: once or twice she had peeped into the book her sister was reading, but it had no pictures or conversations in it, “and what is the use of a book,” thought Alice “without pictures or conversations?”</p>
</blockquote>
<ol type="1">
<li><strong>Bold</strong> Alice’s name.</li>
<li><em>Italicize</em> the dialogue.</li>
<li>Cross out (strikethrough) “and having nothing to do”.</li>
<li>Superscript “book” and subscript “reading”.</li>
<li>Make “conversations” appear as verbatim code.</li>
</ol>
<p>Render your document.</p>
<p>If you formatted everything correctly, you should get this.</p>
<blockquote class="blockquote">
<p><strong>Alice</strong> was beginning to get very tired of sitting by her sister on the bank, <del>and of having nothing to do</del>: once or twice she had peeped into the <sup>book</sup> her sister was <sub>reading</sub>, but it had no pictures or conversations in it, <em>“and what is the use of a <sup>book</sup>,”</em> thought <strong>Alice</strong> <em>“without pictures or <code>conversations</code>?”</em></p>
</blockquote>
</section>
</section>
<section id="headers" class="level3">
<h3 class="anchored" data-anchor-id="headers">Headers</h3>
<p>Section headers (or headings) range from level 1 to level 6 and are identified in Quarto by the number of hash symbols at the beginning of the line.</p>
<pre><code># Header 1 (Heading in Word)
## Header 2 (Heading 2 in Word)
...
###### Header 6 (Heading 6 in Word)</code></pre>
</section>
<section id="links" class="level3">
<h3 class="anchored" data-anchor-id="links">Links</h3>
<p>Links use the syntax <code>[title](link)</code>. For example, to link to <a href="http://cdc.gov">CDC</a>, write <code>[CDC](http://cdc.gov)</code>. For the link to be valid, the close bracket and open parentheses need to touch, so <code>[CDC] (http://cdc.gov)</code> won’t work.</p>
<p>To link to an image, use the syntax <code>![caption](image){alt text}</code>.</p>
<!-- Add link to quarto cartoon to teach how to link images with proper alt text.


Showing examples of inline R code only works for me if I break the line immediately after "r". 
See https://bookdown.org/yihui/rmarkdown-cookbook/verbatim-code-chunks.html for how it should work. -->
<p>Inline notes require unique alphanumeric tags to link the content to the note. To create an inline note, put brackets and carrot around your unique tag in the format <code>quote[^tag]</code>. A couple lines later, type your unique tag followed by a colon, then the note, in the format <code>[^tag]: source</code>. The tags will be auto-numbered in order. In HTML, hovering over the tag will reveal the note and clicking on the tag will bring you to the note at the bottom of the page. For example:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>Item to note[^abc]

[^abc]: note for item</code></pre></td>
<td>Item to note<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></td>
</tr>
</tbody>
</table>
<p>For citations, Rstudio can reference library files, in which each source has a unique tag, when rendering Quarto. For my dissertation, I used the reference manager Mendeley to export my library to a bibtex file that RStudio could reference. There are other methods of referencing citations, as well. If using an external library file, make sure to include it in your YAML.</p>
<section id="your-turn-2" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-2">Your turn</h5>
<p>This paragraph is from the beginning of <a href="https://www.gutenberg.org/ebooks/84"><em>Frankenstein; Or, The Modern Prometheus</em> by Mary Wollstonecraft Shelley</a>.</p>
<blockquote class="blockquote">
<p>From <em>Frankenstein</em> by Mary Wollstonecraft Shelley</p>
<p>You will rejoice to hear that no disaster has accompanied the commencement of an enterprise which you have regarded with such evil forebodings. I arrived here yesterday, and my first task is to assure my dear sister of my welfare and increasing confidence in the success of my undertaking.</p>
</blockquote>
<ol type="1">
<li>Link the title to the webpage https://www.gutenberg.org/ebooks/84.</li>
<li>Add an inline footnote at the end of the passage. The note should say something like “A passage from the first letter to Mrs Saville.”</li>
</ol>
<p>Render your document.</p>
</section>
</section>
<section id="paragraph-formatting" class="level3">
<h3 class="anchored" data-anchor-id="paragraph-formatting">Paragraph formatting</h3>
<p>To create a new paragraph, leave an empty line between paragraphs. To add a line break within a paragraph, put a backslash at the end of the first line.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>This is paragraph 1
without a line break.

This is paragraph 2.</code></pre></td>
<td><p>This is paragraph 1 without a line break.</p>
<p>This is paragraph 2.</p></td>
</tr>
<tr class="even">
<td><pre><code>This is paragraph 1 \
with a line break.

This is paragraph 2.</code></pre></td>
<td><p>This is paragraph 1<br>
with a line break.</p>
<p>This is paragraph 2.</p></td>
</tr>
</tbody>
</table>
<p>Below is an example of the syntax for a poem in markdown.</p>
<blockquote class="blockquote">
<pre><code>**Spring R**, *a haiku by Abby Stamm*

Spring softly greening \
Out my window while indoors \
With R I struggle.</code></pre>
</blockquote>
<p>This is how it renders.</p>
<blockquote class="blockquote">
<p><strong>Spring R</strong>, <em>a haiku by Abby Stamm</em></p>
<p>Spring softly greening<br>
Out my window while indoors<br>
With R I struggle.</p>
</blockquote>
<section id="your-turn-3" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-3">Your turn</h5>
<p>The excerpt below is from Act II, Scene II of <a href="https://www.gutenberg.org/ebooks/1513"><em>Romeo and Juliet</em> by William Shakespeare</a>.</p>
<blockquote class="blockquote">
<pre><code>ROMEO.
Lady, by yonder blessed moon I vow,
That tips with silver all these fruit-tree tops,—

JULIET.
O swear not by the moon, th’inconstant moon,
That monthly changes in her circled orb,
Lest that thy love prove likewise variable.</code></pre>
</blockquote>
<ol type="1">
<li>Add line breaks and paragraph breaks to match the formatting above.</li>
</ol>
<p>Render your document.</p>
</section>
</section>
<section id="lists" class="level3">
<h3 class="anchored" data-anchor-id="lists">Lists</h3>
<section id="unordered-lists" class="level4">
<h4 class="anchored" data-anchor-id="unordered-lists">Unordered lists</h4>
<p>To create unordered lists, you can use the symbols plus (+), minus (-), and asterisk (*). They all produce the same black round bullet. It is possible to customize bullets using CSS, but that is beyond the scope of this workshop.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 36%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Symbols</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>+ list item</code></pre></td>
<td>plus sign, then space</td>
<td><ul>
<li>list item</li>
</ul></td>
</tr>
<tr class="even">
<td><pre><code>- list item</code></pre></td>
<td>minus sign, then space</td>
<td><ul>
<li>list item</li>
</ul></td>
</tr>
<tr class="odd">
<td><pre><code>* list item</code></pre></td>
<td>asterisk, then space</td>
<td><ul>
<li>list item</li>
</ul></td>
</tr>
</tbody>
</table>
<p>There are also some special symbols for lists, such as checkboxes.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 25%">
<col style="width: 33%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Symbols</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>- [ ] Unchecked</code></pre></td>
<td>minus sign &amp; brackets separated by spaces</td>
<td><ul class="task-list">
<li><label><input type="checkbox">Unchecked</label></li>
</ul></td>
</tr>
<tr class="even">
<td><pre><code>- [x] Checked</code></pre></td>
<td>minus sign then space then brackets around an x then space</td>
<td><ul class="task-list">
<li><label><input type="checkbox" checked="">Checked</label></li>
</ul></td>
</tr>
</tbody>
</table>
<section id="your-turn-4" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-4">Your turn</h5>
<p>The animated segment “I can remember” (Jim Simon, <em>Sesame Street</em> season 4) includes the quote, “a loaf of bread, a container of milk, and a stick of butter”.</p>
<ol type="1">
<li>Make a bullet list of these groceries.</li>
<li>Make a second list with checkboxes.</li>
<li>Check off the items you have in your kitchen or pantry. (Vegan and gluten-free options are acceptable, too.)</li>
</ol>
<p>Render your document.</p>
</section>
</section>
<section id="ordered-lists" class="level4">
<h4 class="anchored" data-anchor-id="ordered-lists">Ordered lists</h4>
<p>Ordered list symbols include numbers and letters.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Most ordered list symbols require two spaces before the item, not one. Two spaces will always work if you want to be consistent.</p>
</div>
</div>
<p>Some Markdown compilers will put list items in sequential order as shown below, even if you have not typed them in order. Quarto can reorder numbers and letters, but not roman numerals. Single letters except i or I are assumed to be letters, not roman numerals.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 25%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Symbols</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>1. item a
3. item b</code></pre></td>
<td>number, then period, then one space</td>
<td><ol type="1">
<li>item a</li>
<li>item b</li>
</ol></td>
</tr>
<tr class="even">
<td><pre><code>b.  item a
a.  item b</code></pre></td>
<td>letter, then period, then two spaces</td>
<td><ol start="2" type="a">
<li>item a</li>
<li>item b</li>
</ol></td>
</tr>
<tr class="odd">
<td><pre><code>X.  item a
X.  item b</code></pre></td>
<td>letter, then period, then two spaces</td>
<td><ol start="24" type="A">
<li>item a</li>
<li>item b</li>
</ol></td>
</tr>
<tr class="even">
<td><pre><code>i.  item a
i.  item b</code></pre></td>
<td>letter, then period, then two spaces</td>
<td><ol type="i">
<li>item a</li>
<li>item b</li>
</ol></td>
</tr>
<tr class="odd">
<td><pre><code>I.  item a
I.  item b</code></pre></td>
<td>letters, then period, then two spaces</td>
<td><ol type="I">
<li>item a</li>
<li>item b</li>
</ol></td>
</tr>
</tbody>
</table>
<p>If you want to add a second level to your list, add 4 spaces before each second level item. A shortcut is to highlight that line and press tab twice if you use RStudio’s default tab length of two spaces.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>I like to create lists in which all items start with the same starting letter or number as shown below. This makes them easier to reorder and revise later.</p>
</div>
</div>
<p>You can mix item types across levels, but not within the same level.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 25%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Symbols</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>1. item a
    - sub-item a
    - sub-item b
1. item b</code></pre></td>
<td>4 spaces before each sub-item, all sub-items the same list type</td>
<td><ol type="1">
<li>item a
<ul>
<li>sub-item a</li>
<li>sub-item b</li>
</ul></li>
<li>item b</li>
</ol></td>
</tr>
<tr class="even">
<td><pre><code>I.  item a
    1. sub-item a
    1. sub-item b
I.  item b</code></pre></td>
<td>4 spaces before each sub-item, all sub-items the same list type</td>
<td><ol type="I">
<li>item a
<ol type="1">
<li>sub-item a</li>
<li>sub-item b</li>
</ol></li>
<li>item b</li>
</ol></td>
</tr>
<tr class="odd">
<td><pre><code>A.  item a
    - [ ] check a
    - [x] check b
A.  item b</code></pre></td>
<td>4 spaces before each sub-item, all sub-items the same list type</td>
<td><ol type="A">
<li>item a
<ul class="task-list">
<li><label><input type="checkbox">check a</label></li>
<li><label><input type="checkbox" checked="">check b</label></li>
</ul></li>
<li>item b</li>
</ol></td>
</tr>
</tbody>
</table>
<p>For each subsequent level, follow the same pattern as for the second level. Add four extra spaces at the beginning for each sub-level and keep list types consistent within each level.</p>
<p>If you want to break items in one level across lines in code, just indent the item without a bullet.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 27%">
<col style="width: 25%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Symbols</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>1. item a is too
   long to fit on
   one line
1. item b</code></pre></td>
<td>indent subsequent lines of the same item</td>
<td><ol type="1">
<li>item a is too long to fit on one line</li>
<li>item b</li>
</ol></td>
</tr>
<tr class="even">
<td><pre><code>I.  item a
    1. sub-item a
       continues
I.  item b</code></pre></td>
<td>indent sub-items based on their level</td>
<td><ol type="I">
<li>item a
<ol type="1">
<li>sub-item a continues</li>
</ol></li>
<li>item b</li>
</ol></td>
</tr>
<tr class="odd">
<td><pre><code>A.  item a
    - [ ] check a
          runs on
A.  item b</code></pre></td>
<td>indent sub-items based on their level</td>
<td><ol type="A">
<li>item a
<ul class="task-list">
<li><label><input type="checkbox">check a runs on</label></li>
</ul></li>
<li>item b</li>
</ol></td>
</tr>
</tbody>
</table>
<section id="your-turn-5" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-5">Your turn</h5>
<p>Inspired by the English Christmas song, “The Twelve Days of Christmas” (circa 1780), I invested in an aviary. I now have a peahen named Ava, a couple doves named Betty and Cam, three chickens named Dora, Emmie, and Fran, and a quartet of blackbirds named Grace, Heather, Ida, and Joy.</p>
<ol type="1">
<li>Create a numbered list of the species of birds I have, from least to most.</li>
<li>Under each bird species, add a lettered sub-list with the names of my birds of that species.</li>
<li>As an extra challenge, use Roman numerals for one of the sub-lists.</li>
</ol>
<p>Render your document.</p>
</section>
</section>
</section>
<section id="callout-boxes" class="level3">
<h3 class="anchored" data-anchor-id="callout-boxes">Callout boxes</h3>
<p>There are five types of callout boxes: note, tip, warning, caution, and important. Each box has a different color, symbol, and caption by default. Note that in Word, callout boxes are rendered as tables, not text boxes, so they should be accessible to screen readers.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 47%">
<col style="width: 47%">
</colgroup>
<thead>
<tr class="header">
<th>Syntax</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><pre><code>::: callout-important
This is important.
:::</code></pre></td>
<td><div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is important.</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre><code>::: callout-note
This is a note.
:::</code></pre></td>
<td><div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a note.</p>
</div>
</div></td>
</tr>
<tr class="odd">
<td><pre><code>::: callout-warning
This is a warning.
:::</code></pre></td>
<td><div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a warning.</p>
</div>
</div></td>
</tr>
<tr class="even">
<td><pre><code>::: callout-tip
This is a tip.
:::</code></pre></td>
<td><div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is a tip.</p>
</div>
</div></td>
</tr>
<tr class="odd">
<td><pre><code>::: callout-caution
## My title

This caution has a title.
:::</code></pre></td>
<td><div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Caution</span>My title
</div>
</div>
<div class="callout-body-container callout-body">
<p>This caution has a title.</p>
</div>
</div></td>
</tr>
</tbody>
</table>
<section id="your-turn-6" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-6">Your turn</h5>
<p>The quotes below are excerpts from <a href="https://www.gutenberg.org/ebooks/11"><em>Alice’s Adventures in Wonderland</em> by Lewis Carroll</a>. Put each in the appropriate type of callout box.</p>
<ol type="1">
<li>“Keep your temper,” said the Caterpillar. (important)</li>
<li>“Serpent!” screamed the Pigeon. (warning)</li>
<li>“If everybody minded their own business,” the Duchess said in a hoarse growl, “the world would go round a deal faster than it does.” (tip)</li>
<li>Give each of your callout boxes a title.</li>
</ol>
<p>Render your document.</p>
</section>
</section>
<section id="equations" class="level3">
<h3 class="anchored" data-anchor-id="equations">Equations</h3>
<p>To include a formula, wrap it in dollar signs. If you want the equation to be on its own line, use double dollar signs. In RStudio, when you mouse over an equation with single dollar signs, the pop-up will display how it will render and when you type an equation with double dollar signs, RStudio will show a rendering immediately below the equation.</p>
<p><code>$y_1 = ax^2 + bx + c$</code> renders to <span class="math inline">\(y_1 = ax^2 + bx + c\)</span>.</p>
<p>Advanced syntax for equations is outside the scope of this workshop. Read <a href="https://rmd4sci.njtierney.com/math">R Markdown for Scientists, Chapter 11</a> for an introduction to making complex equations like</p>
<p><span class="math display">\[x = \frac{-b \pm \sqrt{b^2 - 4ac}}{2a}\]</span></p>
<p>To include inline R code, begin the verbatim syntax with “r”.</p>
<blockquote class="blockquote">
<p>For example, “2 + 2 = <code>`r 2+2`</code>” renders to “2 + 2 = 4”.</p>
</blockquote>
<section id="your-turn-7" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-7">Your turn</h5>
<ol type="1">
<li>Write the equation <span class="math inline">\(a^2 + b^2 = c^2\)</span> in a sentence.</li>
<li>Write the same equation centered on its own line.</li>
<li>Write some R code in a sentence, such as “1 + 2 + 3” or 4^2.</li>
</ol>
<p>Render your document.</p>
</section>
<section id="mixing-and-matching" class="level5">
<h5 class="anchored" data-anchor-id="mixing-and-matching">Mixing and matching</h5>
<p>Try mixing and matching the coding options above.</p>
<ol type="1">
<li>Can you put a link, a list, or bold text inside a callout box?</li>
<li>Can you add a footnote to an item in your list or callout box?</li>
<li>Can you add an equation to your list?</li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>A nonsense example of <code>overkill</code>
</div>
</div>
<div class="callout-body-container callout-body">
<p>Visit the <a href="http://cdc.gov">CDC</a> to learn things …</p>
<ul>
<li><del>vaccines</del><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></li>
<li><em>nutrition</em></li>
<li><strong>chronic disease</strong></li>
<li>equations like <span class="math inline">\(ax_1 + bx_2 + c = y\)</span><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></li>
</ul>
</div>
</div>
</section>
</section>
</section>
<section id="writing-a-report" class="level2">
<h2 class="anchored" data-anchor-id="writing-a-report">Writing a report</h2>
<p>Now that you know the basics of markdown and Quarto, let’s start a fresh report. Open a new Quarto file that will write to HTML. Add author and date to the YAML.</p>
<p>Include code blocks as part of your report, the way I show below. Also include text outside the code blocks to explain what you are doing.</p>
<section id="set-up-your-workspace" class="level3">
<h3 class="anchored" data-anchor-id="set-up-your-workspace">Set up your workspace</h3>
<p>Create a “data” folder in your project.</p>
<p>Download an Excel file from <a href="https://public.education.mn.gov/MDEAnalytics/DataTopic.jsp?TOPICID=242">Minnesota Student Survey Reports</a>. Choose whichever options you want, then under “Download”, select “Summary-xls”.</p>
<p>The options I selected for this example report were:</p>
<ul>
<li>Level: State</li>
<li>Name: Statewide</li>
<li>Year: 2022</li>
<li>Grade: Grade 5</li>
<li>Category: Health</li>
<li>Report: ALL</li>
<li>Demographics: ALL</li>
</ul>
<p>Your new file will have a name like “Minnesota_Student_Survey_Summary_Health_0000-00_2022.xlsx”. Move it from your downloads to the data folder in your project.</p>
<p>To include the data from your file in your report, you will need to create a code block using the following syntax. The code blocks in this workshop are all for R, but code blocks can also be used for other languages, such as python.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a basic code block</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>To label your code block to make navigation in RStudio easier, add a unique tag after the r inside <code>{r}</code>. Follow the same rules as when naming R objects.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r my_unique_tag}</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this is a basic code block with a unique tag</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>The file we downloaded is an Excel file, which R cannot read on its own. To import the file we will use the “readxl” package. Check if you have it installed. If you do not, install it using either the install dialog under “Tools” or the <code>install.packages()</code> function as shown below.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if readxl is not installed, run this code to install it.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"readxl"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Change the value of the filename (<code>my_file</code>) to match the name of the file you downloaded. Often in my reports, the first or second code block of the document, above the introduction, will contain any dynamic values, such as filenames, date ranges, and health outcomes of interest.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>my_file <span class="ot">&lt;-</span> <span class="st">"../data/Minnesota_Student_Survey_Summary_Health_0000-00_2022.xlsx"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># keep "data/" to read from the "data" folder when you change my_file</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>my_file <span class="ot">&lt;-</span> <span class="st">"data/Minnesota_Student_Survey_Summary_Health_0000-00_2022.xlsx"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="import-your-data" class="level3">
<h3 class="anchored" data-anchor-id="import-your-data">Import your data</h3>
<div class="callout callout-style-default callout-note callout-titled" title="Two ways to read functions from libraries">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Two ways to read functions from libraries
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>Often code begins with a library call, such as <code>library(readxl)</code>. I have several reasons for not using that method.</p>
<ol type="1">
<li>Some packages, such as “terra”, are huge and often I only want one or two fuctions from them.</li>
<li>Some function names appear in multiple packages. If you don’t specify the package, R uses the function from the most recent package loaded.</li>
<li>When building an R package, loading full libraries is discouraged, so for me it’s habit not to.</li>
<li>When loading package sets like <em>tidyverse</em>, keeping track of which package a function came from can be confusing, so I prefer to be explicit.</li>
</ol>
<p>Instead of loading the package first, I call the function by using the syntax <code>package::function()</code>. This is the method I will use in this workshop.</p>
<p>If you prefer to load the full library first, then use only the function name, feel free.</p>
</div>
</div>
</div>
<p>In the next code block, you will import your data. Open the file in Excel. The first row is a human-readable heading instead of true data. We want to skip that row when we import the data into R, so we will use the option <code>skip = 1</code>.</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Creating R readable Excel files">
<div class="callout-header d-flex align-content-center collapsed" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Creating R readable Excel files
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>When I create Excel files to read into R, I always make my data sheets computer readable, with no headers or merged cells. If I need to include human readable metadata, I will put it on its own in the first sheet, then add the option <code>sheet = 2</code> (or whatever number) when I import my data.</p>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>my_mss_data <span class="ot">&lt;-</span> readxl<span class="sc">::</span><span class="fu">read_xlsx</span>(my_file, <span class="at">skip =</span> <span class="dv">1</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="subset-your-data" class="level3">
<h3 class="anchored" data-anchor-id="subset-your-data">Subset your data</h3>
<p>The dataset we imported combines results for all fifth graders who took the MSS, so complex analyses are not possible. Instead, we will focus on displaying simple results.</p>
<p>Subset the dataset to include only questions about safety, specifically feeling safe at school. Below, I use <code>dplyr</code>, a package in the <code>tidyverse</code> constellation of packages. If you prefer, you can also use base R.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># feel free to combine the filters and run both at once if you want</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>safety_qs <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(my_mss_data, Report <span class="sc">==</span> <span class="st">"Perceptions of Safety"</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>safe_school <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(safety_qs, Question <span class="sc">==</span> <span class="st">"I feel safe at school."</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We want to display a bar chart of feeling safe at school by gender, but the data are messy. To put the data in a format that’s easier to graph, I am using the <code>tidyr</code> package, which is part of the <code>tidyverse</code> universe, but it is not installed as part of <code>tidyverse</code>, and the <code>janitor</code> package.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># if tidyr and janitor are not installed, run this code to install them.</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"janitor"</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyr"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>We will transform the data in four steps, outlined below. If you are fond of tidyverse piping, feel free to use it here. If you are just learning this code, review <code>safe_school_tidy</code> after running each function to notice how it has changed. To run only one line, highlight it and click the chevron next to “Run” in the upper right corner of the window. Click “Run Selected Line(s)”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># first, clean variable names to make them easier to work with</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>safe_school_tidy <span class="ot">&lt;-</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>(safe_school)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># second, isolate only the variables of interest</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>safe_school_tidy <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(safe_school_tidy, question, response, </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>                                  female_count, male_count)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="co"># third, transform the data so gender is one column and count is another</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>safe_school_tidy <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(safe_school_tidy, <span class="fu">c</span>(male_count, female_count),</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">names_to =</span> <span class="st">"gender"</span>, <span class="at">values_to =</span> <span class="st">"count"</span>)</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a><span class="co"># fourth, clean up the values in the "gender" column</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>safe_school_tidy <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(safe_school_tidy, <span class="at">gender =</span> <span class="fu">gsub</span>(<span class="st">"_count"</span>, <span class="st">""</span>, gender))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="callout callout-style-default callout-tip callout-titled" title="Code block formatting best practice">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Code block formatting best practice
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>In RStudio, you will see a vertical line at character 80 in your Quarto document, unless you deliberately changed the default. This line is important if you intend to include your code in your document. Code blocks do not wrap lines, so for all of your code to show up, you need to create manual line breaks like I did above.</p>
<p>If you do not intend to show your code, these line breaks don’t matter as much, but it is still a good practice to develop for future projects where you will need to show your code.</p>
</div>
</div>
</div>
<p>The last data transformation step is to convert all of our variables to numbers so they can be plotted using <code>barplot()</code>. In R, factors are numbers with string labels, so we will convert character variables to factors. You may have noticed the count is a character variable that contains a comma after the thousands digit. For R to read it correctly, we will manually remove the comma, then convert the values to numeric. To review variable types before and after running the code below, use <code>str(safe_school_tidy)</code>.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>safe_school_tidy <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(safe_school_tidy,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender =</span> <span class="fu">factor</span>(gender, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>)),</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">response =</span> <span class="fu">factor</span>(response, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Strongly disagree"</span>, <span class="st">"Disagree"</span>, </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"Agree"</span>, <span class="st">"Strongly agree"</span>)),</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">count =</span> <span class="fu">as.numeric</span>(<span class="fu">gsub</span>(<span class="st">","</span>, <span class="st">""</span>, count))</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Now that we have prepared the data, let’s create a chart.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r chart_basic}</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># draw the plot</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(count <span class="sc">~</span> gender <span class="sc">+</span> response, <span class="at">data =</span> safe_school_tidy, <span class="at">beside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"#003865"</span>, <span class="st">"#78BE21"</span>), <span class="at">main =</span> <span class="st">"Feeling safe at school by gender"</span>)</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="co"># add a legend</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>), <span class="at">fill =</span> <span class="fu">c</span>(<span class="st">"#003865"</span>, <span class="st">"#78BE21"</span>))</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="reproducible_report_html_files/figure-html/chart_basic-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Note that we will also want the chart to be accessible, with a title, caption, and alt text. We can customize several other settings for charts, including height and width. Note that rendering to Word may result in the caption being incorrectly assigned to the alt text, so you will want to verify in Word after rendering.</p>
<div class="cell" data-layout-align="left">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb40"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="in">```{r chart_custom}</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width:  6 # Width for figures in inches</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 3 # Height for figures in inches</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align:  "left"</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-alt:    "Chart of counts of how safe students feel at school by gender"</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap:    "Male and female students feel similarly safe at school."</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co"># redraw the plot</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(count <span class="sc">~</span> gender <span class="sc">+</span> response, <span class="at">data =</span> safe_school_tidy, <span class="at">beside =</span> <span class="cn">TRUE</span>, </span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">col =</span> <span class="fu">c</span>(<span class="st">"#003865"</span>, <span class="st">"#78BE21"</span>), <span class="at">main =</span> <span class="st">"Feeling safe at school by gender"</span>)</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co"># add a legend</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="at">legend =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>), <span class="at">fill =</span> <span class="fu">c</span>(<span class="st">"#003865"</span>, <span class="st">"#78BE21"</span>))</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="reproducible_report_html_files/figure-html/chart_custom-1.png" class="img-fluid figure-img" alt="Chart of counts of how safe students feel at school by gender" width="576"></p>
<figcaption>Male and female students feel similarly safe at school.</figcaption>
</figure>
</div>
</div>
</div>
<p>To increase accessibility to the data in your chart, providing the data as text is recommended. When compiling to HTML, Quarto can create data tables that can be read properly by screen readers.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(safe_school_tidy, </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"Table of how safe students feel at school by gender"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Table of how safe students feel at school by gender</caption>
<thead>
<tr class="header">
<th style="text-align: left;">question</th>
<th style="text-align: left;">response</th>
<th style="text-align: left;">gender</th>
<th style="text-align: right;">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Strongly agree</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7428</td>
</tr>
<tr class="even">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Strongly agree</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">6601</td>
</tr>
<tr class="odd">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Agree</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">7594</td>
</tr>
<tr class="even">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Agree</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">7865</td>
</tr>
<tr class="odd">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Disagree</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">1192</td>
</tr>
<tr class="even">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Disagree</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">1298</td>
</tr>
<tr class="odd">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Strongly disagree</td>
<td style="text-align: left;">male</td>
<td style="text-align: right;">338</td>
</tr>
<tr class="even">
<td style="text-align: left;">I feel safe at school.</td>
<td style="text-align: left;">Strongly disagree</td>
<td style="text-align: left;">female</td>
<td style="text-align: right;">230</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="your-turn-8" class="level5">
<h5 class="anchored" data-anchor-id="your-turn-8">Your turn</h5>
<p>Select a new question and recreate the chart and table. Suggestions for an extra challenge:</p>
<ul>
<li>“I feel safe at home.” for all students combined</li>
<li>“I feel safe in my neighborhood.” for only girls</li>
<li>The same chart as in the example, showing percents instead of counts</li>
</ul>
<p>Make sure your caption and alt text match your data.</p>
</section>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>note for item<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>before it’s deleted.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>not this, though.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>